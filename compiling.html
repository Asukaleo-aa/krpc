

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Compiling kRPC &mdash; kRPC 0.3.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="kRPC 0.3.3 documentation" href="index.html"/>
        <link rel="next" title="Extending kRPC" href="extending.html"/>
        <link rel="prev" title="Other Clients, Services and Scripts" href="third-party.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> kRPC
          

          
          </a>

          
            
            
              <div class="version">
                0.3.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials and Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="csharp.html">C#</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp.html">C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="java.html">Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="lua.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="third-party.html">Other Clients, Services and Scripts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Compiling kRPC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-dependencies">Install Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setup-your-environment">Setup your Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-using-bazel">Building using Bazel</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-c-projects-using-an-ide">Building the C# projects using an IDE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-tests">Running the Tests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extending.html">Extending kRPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="communication-protocol.html">Communication Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internals of kRPC</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">kRPC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Compiling kRPC</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/compiling.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="compiling-krpc">
<h1>Compiling kRPC<a class="headerlink" href="#compiling-krpc" title="Permalink to this headline">¶</a></h1>
<p>kRPC uses the <a class="reference external" href="http://bazel.io">Bazel build system</a>.</p>
<div class="section" id="install-dependencies">
<h2>Install Dependencies<a class="headerlink" href="#install-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Bazel automatically downloads most of the required dependencies to build
kRPC. However the following will need to be installed on your system:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://www.mono-project.com/download/">Mono C# compiler and runtime</a></li>
<li>Python, including virtualenv and pip</li>
<li>pdflatex for building the documentation</li>
<li>RSVG for converting SVGs to PNGs</li>
<li>libxml, libxslt and Python headers, for building the Java documentation</li>
</ul>
</div></blockquote>
<p>To install the latest C# compiler and runtime on Ubuntu, follow the instructions
on <a class="reference external" href="http://www.mono-project.com/docs/getting-started/install/linux/#debian-ubuntu-and-derivatives">Mono&#8217;s website</a>
The other dependencies can be installed via apt:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo apt-get install mono-complete <span class="se">\</span>
  python-virtualenv python-pip <span class="se">\</span>
  texlive-latex-base texlive-latex-recommended <span class="se">\</span>
  texlive-fonts-recommended texlive-latex-extra <span class="se">\</span>
  librsvg2-bin libxml2-dev libxslt1-dev python-dev
</pre></div>
</div>
</div>
<div class="section" id="setup-your-environment">
<h2>Setup your Environment<a class="headerlink" href="#setup-your-environment" title="Permalink to this headline">¶</a></h2>
<p>Before building kRPC you need to make <code class="docutils literal"><span class="pre">lib/ksp</span></code> point to a directory
containing Kerbal Space Program. For example on Linux, if your KSP directory is
at <code class="docutils literal"><span class="pre">/path/to/ksp</span></code> and your kRPC source tree at <code class="docutils literal"><span class="pre">/path/to/krpc</span></code> you can
create a symlink using <code class="docutils literal"><span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">/path/to/ksp</span> <span class="pre">/path/to/krpc/lib/ksp</span></code></p>
<p>You may also need to modify the symlink at <code class="docutils literal"><span class="pre">lib/mono-4.5</span></code> to point to the
correct location of your Mono installation.</p>
</div>
<div class="section" id="building-using-bazel">
<h2>Building using Bazel<a class="headerlink" href="#building-using-bazel" title="Permalink to this headline">¶</a></h2>
<p>To build the kRPC release archive, run <code class="docutils literal"><span class="pre">bazel</span> <span class="pre">build</span> <span class="pre">//:krpc</span></code>. The resulting
archive containing the GameData directory, client libraries etc will be created
at <code class="docutils literal"><span class="pre">bazel-out/krpc-&lt;version&gt;.zip</span></code>.</p>
<p>The build scripts also define specific other targets that may be useful. Build
them using <code class="docutils literal"><span class="pre">bazel</span> <span class="pre">build</span> <span class="pre">&lt;target&gt;</span></code>:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">//server</span></code> builds the server plugin and associated files</li>
<li>Targets for building individual clients:<ul>
<li><code class="docutils literal"><span class="pre">//client/csharp</span></code></li>
<li><code class="docutils literal"><span class="pre">//client/cpp</span></code></li>
<li><code class="docutils literal"><span class="pre">//client/java</span></code></li>
<li><code class="docutils literal"><span class="pre">//client/lua</span></code></li>
<li><code class="docutils literal"><span class="pre">//client/python</span></code></li>
</ul>
</li>
<li>Targets for building individual services:<ul>
<li><code class="docutils literal"><span class="pre">//service/SpaceCenter</span></code></li>
<li><code class="docutils literal"><span class="pre">//service/InfernalRobotics</span></code></li>
<li><code class="docutils literal"><span class="pre">//service/KerbalAlarmClock</span></code></li>
<li><code class="docutils literal"><span class="pre">//service/RemoteTech</span></code></li>
</ul>
</li>
<li>Targets for building protobuf definitions for individual languages:<ul>
<li><code class="docutils literal"><span class="pre">//protobuf/csharp</span></code></li>
<li><code class="docutils literal"><span class="pre">//protobuf/cpp</span></code></li>
<li><code class="docutils literal"><span class="pre">//protobuf/java</span></code></li>
<li><code class="docutils literal"><span class="pre">//protobuf/lua</span></code></li>
<li><code class="docutils literal"><span class="pre">//protobuf/python</span></code></li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">//doc:html</span></code> builds the HTML documentation</li>
<li><code class="docutils literal"><span class="pre">//doc:pdf</span></code> builds the PDF documentation</li>
</ul>
<p>There are also several convenience scripts:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">tools/serve-docs.sh</span></code> &#8211; build the documentation and serve it from
<code class="docutils literal"><span class="pre">http://localhost:8080</span></code></li>
<li><code class="docutils literal"><span class="pre">tools/install.sh</span></code> &#8211; build the plugin and the testing tools, and install
them into the GameData directory of the copy of KSP found at <code class="docutils literal"><span class="pre">lib/ksp</span></code>.</li>
</ul>
</div>
<div class="section" id="building-the-c-projects-using-an-ide">
<h2>Building the C# projects using an IDE<a class="headerlink" href="#building-the-c-projects-using-an-ide" title="Permalink to this headline">¶</a></h2>
<p>A C# solution file (<code class="docutils literal"><span class="pre">kRPC.sln</span></code>) is provided in the root of the project for use
with MonoDevelop or a similar C# IDE.</p>
<p>Some of the C# source files it references are generated by the Bazel build
scripts. You need to run <code class="docutils literal"><span class="pre">bazel</span> <span class="pre">build</span> <span class="pre">//:csproj</span></code> to generate these files
before the solution can be built.</p>
<p>Alternatively, if you are unable to run Bazel to build these files, you can
<a class="reference external" href="https://github.com/krpc/krpc/releases/download/v0.3.3/krpc-genfiles-0.3.3.zip">download them from GitHub</a>. Simply extract
this archive over your copy of the source and you are good to go.</p>
<div class="section" id="running-the-tests">
<h3>Running the Tests<a class="headerlink" href="#running-the-tests" title="Permalink to this headline">¶</a></h3>
<p>kRPC contains a suite of tests for the server plugin, services, client
libraries and others.</p>
<p>The tests, which do not require KSP to be running, can be executed using:
<code class="docutils literal"><span class="pre">bazel</span> <span class="pre">test</span> <span class="pre">//:test</span></code>. Bazel will automatically download most of the required
dependencies to run the tests, however you will also need to install Lua and
LuaRocks on your system. On Ubuntu, these can be installed using: <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span>
<span class="pre">install</span> <span class="pre">lua5.1</span> <span class="pre">luarocks</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need to install luarocks version 2.2.0 or higher. On older versions of
Ubuntu, the version in the apt repositories is too old and luarocks will need
to be installed via other means.</p>
</div>
<p>kRPC also includes a suite of tests that require KSP to be running. First run
<code class="docutils literal"><span class="pre">tools/install.sh</span></code> to build kRPC and a testing tools DLL, and install them
into the GameData directory of the copy of KSP found at <code class="docutils literal"><span class="pre">lib/ksp</span></code>. Then run
KSP, load a save game and start the server (with automatically accept client
connected enabled). Then install the krpc python client, and run the scripts
found in <code class="docutils literal"><span class="pre">service/SpaceCenter/test</span></code>. These tests will automatically load a
save game called <code class="docutils literal"><span class="pre">test</span></code>, launch a vessel and run various tests on it.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extending.html" class="btn btn-neutral float-right" title="Extending kRPC" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="third-party.html" class="btn btn-neutral" title="Other Clients, Services and Scripts" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2016, djungelorm.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.3.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61341323-1', 'auto');
  ga('send', 'pageview');
</script>

<script>
  // Open external links in a new window
  jQuery(document).ready(function($) {
    $('a').not('[href*="mailto:"]').each(function () {
      var isInternalLink = new RegExp('/' + window.location.host + '/');
      if (!isInternalLink.test(this.href)) {
        $(this).attr('target', '_blank');
      }
    });
  });
</script>


</body>
</html>