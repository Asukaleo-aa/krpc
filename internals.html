

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Internals of kRPC &mdash; kRPC 0.4.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="kRPC 0.4.0 documentation" href="index.html"/>
        <link rel="prev" title="Messaging Protocol" href="communication-protocols/messages.html"/>
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61341323-1', 'auto');
  ga('send', 'pageview');
</script>


  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> kRPC
          

          
          </a>

          
            
            
              <div class="version">
                0.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials and Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="csharp.html">C#</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp.html">C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="java.html">Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="lua.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="third-party.html">Other Clients, Services and Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiling.html">Compiling kRPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending.html">Extending kRPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="communication-protocols.html">Communication Protocols</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Internals of kRPC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#server-performance-settings">Server Performance Settings</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">kRPC</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Internals of kRPC</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/internals.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="internals-of-krpc">
<span id="internals"></span><h1>Internals of kRPC<a class="headerlink" href="#internals-of-krpc" title="Permalink to this headline">¶</a></h1>
<div class="section" id="server-performance-settings">
<span id="id1"></span><h2>Server Performance Settings<a class="headerlink" href="#server-performance-settings" title="Permalink to this headline">¶</a></h2>
<div class="figure align-right" id="id2">
<img alt="_images/server-window-advanced.png" src="_images/server-window-advanced.png" />
<p class="caption"><span class="caption-text">Server window showing the advanced settings.</span></p>
</div>
<p>kRPC processes its queue of remote procedures when its FixedUpdate method is
invoked. This is called every fixed framerate frame, typically about 60 times a
second. If kRPC were to only execute one RPC per FixedUpdate, it would only be
able to execute at most 60 RPCs per second. In order to achieve a higher RPC
throughput, it can execute multiple RPCs per FixedUpdate. However, if it is
allowed to process too many RPCs per FixedUpdate, the game’s framerate would be
adversely affected. The following settings control this behavior, and the
resulting tradeoff between RPC throughput and game FPS:</p>
<ol class="arabic simple">
<li><strong>One RPC per update</strong>. When this is enabled, the server will execute at most
one RPC per client per update. This will have minimal impact on the games
framerate, while still allowing kRPC to execute RPCs. If you don’t need a
high RPC throughput, this is a good option to use.</li>
<li><strong>Maximum time per update</strong>. When one RPC per update is not enabled, this
setting controls the maximum amount of time (in nanoseconds) that kRPC will
spend executing RPCs per FixedUpdate.  Setting this to a high value, for
example 20000 ns, will allow the server to process many RPCs at the expense
of the game’s framerate. A low value, for example 1000 ns, won’t allow the
server to execute many RPCs per update, but will allow the game to run at a
much higher framerate.</li>
<li><strong>Adaptive rate control</strong>. When enabled, kRPC will automatically adjust the
maximum time per update parameter, so that the game has a minimum framerate
of 60 FPS. Enabling this setting provides a good tradeoff between RPC
throughput and the game framerate.</li>
</ol>
<p>Another consideration is the responsiveness of the server. Clients must execute
RPCs in sequence, one after another, and there is usually a (short) delay
between them. This means that when the server finishes executing an RPC, if it
were to immediately check for a new RPC it will not find any and will return
from the FixedUpdate. This means that any new RPCs will have to wait until the
next FixedUpdate, and results in the server only executing a single RPC per
FixedUpdate regardless of the maximum time per update setting.</p>
<p>Instead, higher RPC throughput can be obtained if the server waits briefly after
finishing an RPC to see if any new RPCs are received. This is done in such a way
that the maximum time per update setting (above) is still observed.</p>
<p>This behavior is enabled by the <strong>blocking receives</strong> option. <strong>Receive
timeout</strong> sets the maximum amount of time the server will wait for a new RPC
from a client.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="communication-protocols/messages.html" class="btn btn-neutral" title="Messaging Protocol" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2017, djungelorm.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.4.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  // Open external links in a new window
  jQuery(document).ready(function($) {
    $('a').not('[href*="mailto:"]').each(function () {
      var isInternalLink = new RegExp('/' + window.location.host + '/');
      if (!isInternalLink.test(this.href)) {
        $(this).attr('target', '_blank');
      }
    });
  });
</script>


</body>
</html>